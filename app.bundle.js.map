{"version":3,"sources":["webpack:///./src/vendor/flexble/base.css?c677","webpack:///./src/vendor/flexble/base.css","webpack:///./src/style.css?7163","webpack:///./src/style.css","webpack:///./src/assets/style/color.css","webpack:///./src/assets/style/background.css","webpack:///./src/assets/image/bg_1.jpg","webpack:///./src/assets/style/font.css","webpack:///./src/js/model/model.ts","webpack:///./src/js/utils/canvasFn.ts","webpack:///./src/js/model/item/cursor.ts","webpack:///./src/assets/image/peach/1.png","webpack:///./src/assets/image/peach/2.png","webpack:///./src/assets/image/peach/3.png","webpack:///./src/assets/image/peach/4.png","webpack:///./src/assets/image/peach/5.png","webpack:///./src/assets/image/peach/6.png","webpack:///./src/js/utils/utils.ts","webpack:///./src/js/controller/item/cursor.ts","webpack:///./src/js/model/item/game.ts","webpack:///./src/js/controller/item/game/snake.ts","webpack:///./src/js/controller/item/game.ts","webpack:///./src/js/model/item/menu.ts","webpack:///./src/js/controller/item/menu/star.ts","webpack:///./src/js/controller/item/menu.ts","webpack:///./src/js/controller/controller.ts","webpack:///./src/js/test.ts","webpack:///./src/js/service/item/mouse.ts","webpack:///./src/js/service/item/keyboard.ts","webpack:///./src/js/service/item/screen.ts","webpack:///./src/js/service/service.ts","webpack:///./src/js/main.ts","webpack:///./src/index.ts"],"names":["api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","___CSS_LOADER_AT_RULE_IMPORT_0___","___CSS_LOADER_AT_RULE_IMPORT_1___","___CSS_LOADER_AT_RULE_IMPORT_2___","___CSS_LOADER_GET_URL_IMPORT___","___CSS_LOADER_URL_IMPORT_0___","___CSS_LOADER_URL_REPLACEMENT_0___","canvasNode","document","getElementById","mode","ctx","getContext","clientWidth","documentElement","clientHeight","interface","setCanvasToFullScreen","node","width","height","createAndRenderOffscreenCanvas","obj","w","h","offscreenCanvas","createElement","offscreenCtx","render","drawLine","array","color","save","beginPath","lineWidth","strokeStyle","moveTo","x","y","each","item","lineTo","closePath","stroke","restore","drawRect","isEmpty","borderColor","borderWidth","strokeRect","fillStyle","fillRect","clearRect","drawImage","image","Math","floor","drawText","text","font","newFont","textBaseline","fillText","drawCircle","radius","arc","PI","fill","axisX","axisY","isClicked","isMoving","animation","offsetXScope","offsetYScope","widthScope","speed","showNumber","picArray","getSimpleRandomNumber","max","min","multiple","noZero","noInt","number","getResult","random","minPer","ceil","getSimpleRandomColor","toString","getRandomItemFromArray","length","deepClone","origin","toStr","Object","prototype","call","target","key","hasOwnProperty","this","utilsFn","canvasFn","init","count","randomInfoArray","imageArray","Image","src","currentIndex","generateInfo","drawRectByRandomInfo","drawPicByRandomInfo","resetRenderInfo","cursor","randomRectInfo","randomOffsetX","randomOffsetY","randomWidth","randomHeight","randomColor","randomImage","gameModel","snake","game","rectWidth","start","wall","player","oriAxis","oriLength","oriSpeed","speedUpIntervalCount","scoreAxis","scoreColor","scoreText","scoreFont","food","initPlayerInfo","initWallInfo","initFoodInfo","initScoreInfo","drawPlayer","drawWall","drawFood","drawScore","playerModel","score","speedCount","position","axis","drawPlayerByInfo","playerMoveByPosition","eatFood","checkSpeedUp","checkCollision","wallModel","vm","foodModel","resetInfo","model","eating","shift","tempObj","lastAxis","headAxis","menu","star","tiny","maxNumber","big","name","focusIndex","defR","gap","textCount","initTinyStarInfo","initMenuTextInfo","initTextInfo","drawTinyStar","drawMenuText","tinyStarModel","velocityX","velocityY","move","textModel","innerTextObject","createText","findText","index","data","getImageData","pos","j","createRadius","canvasControllerMainFn","stats","begin","clearAll","end","window","requestAnimationFrame","initStats","initRenderInfo","showPanel","body","appendChild","dom","testModel","randomNumberArray","utils","fn","console","time","timeEnd","sort","a","b","table","mouseMove","mouseUp","mouseDown","mouseLeave","off","on","e","offsetX","offsetY","textArray","menuText","Promise","resolve","reject","then","style","keyDown","preventDefault","keyCode","refreshPosition","resize","mouseService","keyboardService","screenService","mainController","mainService","testFn","ready","hotModuleSet"],"mappings":"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","file":"app.bundle.js","sourcesContent":["var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./base.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(module.id, content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body,\\r\\ndl,\\r\\ndd,\\r\\nul,\\r\\nol,\\r\\nh1,\\r\\nh2,\\r\\nh3,\\r\\nh4,\\r\\nh5,\\r\\nh6,\\r\\npre,\\r\\nform,\\r\\ninput,\\r\\ntextarea,\\r\\np,\\r\\nhr,\\r\\nthead,\\r\\ntbody,\\r\\ntfoot,\\r\\nth,\\r\\ntd {\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n}\\r\\nul,\\r\\nol {\\r\\n  list-style: none;\\r\\n}\\r\\na {\\r\\n  text-decoration: none;\\r\\n}\\r\\nhtml {\\r\\n  -ms-text-size-adjust: none;\\r\\n  -webkit-text-size-adjust: none;\\r\\n  text-size-adjust: none;\\r\\n}\\r\\nbody {\\r\\n  line-height: 1.5;\\r\\n  font-size: 14px;\\r\\n}\\r\\nbody,\\r\\nbutton,\\r\\ninput,\\r\\nselect,\\r\\ntextarea {\\r\\n  font-family: \\\"helvetica neue\\\", tahoma, \\\"hiragino sans gb\\\", stheiti,\\r\\n    \\\"wenquanyi micro hei\\\", \\\\5fae\\\\8f6f\\\\96c5\\\\9ed1, \\\\5b8b\\\\4f53, sans-serif;\\r\\n}\\r\\nb,\\r\\nstrong {\\r\\n  font-weight: bold;\\r\\n}\\r\\ni,\\r\\nem {\\r\\n  font-style: normal;\\r\\n}\\r\\ntable {\\r\\n  border-collapse: collapse;\\r\\n  border-spacing: 0;\\r\\n}\\r\\ntable th,\\r\\ntable td {\\r\\n  border: 1px solid #ddd;\\r\\n  padding: 5px;\\r\\n}\\r\\ntable th {\\r\\n  font-weight: inherit;\\r\\n  border-bottom-width: 2px;\\r\\n  border-bottom-color: #ccc;\\r\\n}\\r\\nimg {\\r\\n  border: 0 none;\\r\\n  width: auto\\\\9;\\r\\n  max-width: 100%;\\r\\n  vertical-align: top;\\r\\n  height: auto;\\r\\n}\\r\\nbutton,\\r\\ninput,\\r\\nselect,\\r\\ntextarea {\\r\\n  font-family: inherit;\\r\\n  font-size: 100%;\\r\\n  margin: 0;\\r\\n  vertical-align: baseline;\\r\\n}\\r\\nbutton,\\r\\nhtml input[type=\\\"button\\\"],\\r\\ninput[type=\\\"reset\\\"],\\r\\ninput[type=\\\"submit\\\"] {\\r\\n  -webkit-appearance: button;\\r\\n  cursor: pointer;\\r\\n}\\r\\nbutton[disabled],\\r\\ninput[disabled] {\\r\\n  cursor: default;\\r\\n}\\r\\ninput[type=\\\"checkbox\\\"],\\r\\ninput[type=\\\"radio\\\"] {\\r\\n  box-sizing: border-box;\\r\\n  padding: 0;\\r\\n}\\r\\ninput[type=\\\"search\\\"] {\\r\\n  -webkit-appearance: textfield;\\r\\n  -moz-box-sizing: content-box;\\r\\n  -webkit-box-sizing: content-box;\\r\\n  box-sizing: content-box;\\r\\n}\\r\\ninput[type=\\\"search\\\"]::-webkit-search-decoration {\\r\\n  -webkit-appearance: none;\\r\\n}\\r\\ninput:focus {\\r\\n  outline: none;\\r\\n}\\r\\nselect[size],\\r\\nselect[multiple],\\r\\nselect[size][multiple] {\\r\\n  border: 1px solid #aaa;\\r\\n  padding: 0;\\r\\n}\\r\\narticle,\\r\\naside,\\r\\ndetails,\\r\\nfigcaption,\\r\\nfigure,\\r\\nfooter,\\r\\nheader,\\r\\nhgroup,\\r\\nmain,\\r\\nnav,\\r\\nsection,\\r\\nsummary {\\r\\n  display: block;\\r\\n}\\r\\naudio,\\r\\ncanvas,\\r\\nvideo,\\r\\nprogress {\\r\\n  display: inline-block;\\r\\n}\\r\\nbody {\\r\\n  background: #fff;\\r\\n}\\r\\ninput::-webkit-input-speech-button {\\r\\n  display: none;\\r\\n}\\r\\nbutton,\\r\\ninput,\\r\\ntextarea {\\r\\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\\r\\n}\\r\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(module.id, content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_AT_RULE_IMPORT_0___ = require(\"-!../node_modules/css-loader/dist/cjs.js!./assets/style/color.css\");\nvar ___CSS_LOADER_AT_RULE_IMPORT_1___ = require(\"-!../node_modules/css-loader/dist/cjs.js!./assets/style/background.css\");\nvar ___CSS_LOADER_AT_RULE_IMPORT_2___ = require(\"-!../node_modules/css-loader/dist/cjs.js!./assets/style/font.css\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nexports.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\nexports.i(___CSS_LOADER_AT_RULE_IMPORT_1___);\nexports.i(___CSS_LOADER_AT_RULE_IMPORT_2___);\n// Module\nexports.push([module.id, \"\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".color-red {\\r\\n  color: red;\\r\\n}\\r\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_GET_URL_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL_IMPORT_0___ = require(\"../image/bg_1.jpg\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\nexports.push([module.id, \".main_background {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") no-repeat center center / cover;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export default __webpack_public_path__ + \"images/00168cecf7c208917473f3e37c8ba787.jpg\";","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/* @font-face {\\r\\n  font-family: \\\"MyFont\\\";\\r\\n  src: url(\\\"../font/simkai.ttf\\\");\\r\\n}\\r\\n\\r\\n.font-simkai {\\r\\n  font-family: \\\"MyFont\\\";\\r\\n} */\\r\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\r\n * @Description: 常量数据模型，设置项\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-02-11 20:33:15\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 19:15:34\r\n */\r\nconst canvasNode: any = document.getElementById(\"mainCanvas\");\r\n\r\nlet mainModel: any = {\r\n  mode: 'normal', // 'normal'、'test'\r\n  canvasNode: canvasNode,\r\n  ctx: canvasNode.getContext(\"2d\"),\r\n  clientWidth: document.documentElement.clientWidth,\r\n  clientHeight: document.documentElement.clientHeight,\r\n  interface: 'menu', // 'menu'、'game'\r\n};\r\n\r\nexport default mainModel;","/*\r\n * @Description: canvas api封装\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-02-11 16:13:25\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-02-29 14:04:11\r\n */\r\nimport $ from \"jquery\";\r\nimport mainModel from \"../model/model\";\r\n\r\nexport default class CanvasFn {\r\n  /**\r\n   * @description: 设置canvas为全屏\r\n   * @param {object} node canvas节点\r\n   * @return: void\r\n   * @author: Pumpking\r\n   */\r\n  setCanvasToFullScreen(node: any) {\r\n    node.width = mainModel.clientWidth;\r\n    node.height = mainModel.clientHeight;\r\n  }\r\n  /**\r\n   * @description: 为当前元素obj生成离屏canvas并渲染，渲染方法render()，离屏canvas属性offscreenCanvas，离屏ctx属性offscreenCtx\r\n   * @param {object} obj 当前元素信息所在对象\r\n   * @param {number} w 离屏canvas宽度\r\n   * @param {number} h 离屏canvas高度\r\n   * @return: void\r\n   * @author: Pumpking\r\n   */\r\n  createAndRenderOffscreenCanvas(obj: any, w: number, h: number) {\r\n    obj.offscreenCanvas = document.createElement('canvas');\r\n    obj.offscreenCanvas.width = w;\r\n    obj.offscreenCanvas.height = h;\r\n    obj.offscreenCtx = obj.offscreenCanvas.getContext('2d');\r\n    obj.render(obj.offscreenCtx);\r\n  }\r\n  /**\r\n   * @description: 绘制线\r\n   * @param {object} ctx canvas\r\n   * @param {array} array 包含顺序路径点坐标的数组，eg.[{x: 0, y: 0}]\r\n   * @param {string} 线条颜色，默认黑色，可选\r\n   * @param {number} 线条宽度，默认1，可选\r\n   * @return: void\r\n   * @author: Pumpking\r\n   */\r\n  drawLine(ctx: any, array: Array<any>, color?: string, width?: number) {\r\n    ctx.save();\r\n    ctx.beginPath();\r\n\r\n    color = color || '#000';\r\n    width = width || 1;\r\n\r\n    ctx.lineWidth = width;\r\n    ctx.strokeStyle = color;\r\n    \r\n    ctx.moveTo(array[0].x, array[0].y);\r\n    $.each(array, (i, item) => {\r\n      ctx.lineTo(item.x, item.y);\r\n    });\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n  /**\r\n   * @description: 绘制矩形\r\n   * @param {object} ctx canvas\r\n   * @param {number} x x坐标\r\n   * @param {number} y y坐标\r\n   * @param {number} w 宽度\r\n   * @param {number} h 高度\r\n   * @param {string} color 填充颜色\r\n   * @param {boolean} isEmpty 是否空心，可填\r\n   * @param {string} borderColor 边框颜色，可填\r\n   * @param {number} borderWidth 边框宽度，可填\r\n   * @return: void\r\n   * @author: Pumpking\r\n   */  \r\n  drawRect(ctx: any, x: number, y: number, w: number, h: number, color: string, isEmpty?: boolean, borderColor?: string, borderWidth?: string) {\r\n    ctx.save();\r\n    ctx.lineWidth = borderWidth || 0;\r\n\r\n    if (isEmpty === true) {\r\n      ctx.strokeStyle = borderColor;\r\n      ctx.strokeRect(x, y, w, h);\r\n    } else {\r\n      ctx.fillStyle = color;\r\n      ctx.fillRect(x, y, w, h);\r\n    }\r\n    ctx.restore();\r\n  }\r\n  /**\r\n   * @description: 清除矩形\r\n   * @param {object} ctx canvas\r\n   * @param {number} x x坐标\r\n   * @param {number} y y坐标\r\n   * @param {number} w 宽度\r\n   * @param {number} h 高度\r\n   * @return: void\r\n   * @author: Pumpking\r\n   */  \r\n  clearRect(ctx: any, x: number, y: number, w: number, h: number) {\r\n    ctx.clearRect(x, y, w, h);\r\n  }\r\n  /**\r\n   * @description: 绘制图片\r\n   * @param {object} ctx canvas\r\n   * @param {object} image 图片节点\r\n   * @param {number} x x坐标\r\n   * @param {number} y y坐标\r\n   * @param {number} w 宽度\r\n   * @param {number} h 高度\r\n   * @return: void\r\n   * @author: Pumpking\r\n   */  \r\n  drawImage(ctx: any, image: any, x: number, y: number, w: number, h: number) {\r\n    ctx.drawImage(image, Math.floor(x), Math.floor(y), Math.floor(w), Math.floor(h));\r\n  }\r\n  /**\r\n   * @description: 绘制文字\r\n   * @param {object} ctx canvas\r\n   * @param {string} text 文字\r\n   * @param {number} x x坐标\r\n   * @param {number} y y坐标\r\n   * @param {string} font 文字信息\r\n   * @param {string} color 颜色\r\n   * @return: void\r\n   * @author: Pumpking\r\n   */\r\n  drawText(ctx: any, text: string, x: number, y: number, font: (string | number), color: string) {\r\n    ctx.save();\r\n\r\n    color = color || '#000';\r\n    const newFont = font ? (typeof font === 'number' ? (font + 'px sans-serif') : font) : '10px sans-serif';\r\n\r\n    ctx.font = newFont;\r\n    ctx.fillStyle = color;\r\n    ctx.textBaseline = 'hanging'; // 主要用于离屏canvas坐标和text坐标一致，文字显示完全\r\n    ctx.fillText(text, x, y);\r\n    ctx.restore();\r\n  }\r\n  /**\r\n   * @description: 绘制圆形\r\n   * @param {object} ctx canvas\r\n   * @param {number} radius 半径\r\n   * @param {number} x x坐标\r\n   * @param {number} y y坐标\r\n   * @param {string} color 填充颜色\r\n   * @param {boolean} isEmpty 是否为圆环，可选\r\n   * @param {string} borderColor 边框颜色，可选\r\n   * @param {number} borderWidth 边框宽度，可选\r\n   * @return: void\r\n   * @author: Pumpking\r\n   */\r\n  drawCircle(ctx: any, radius: number, x: number, y: number, color: string, isEmpty?: boolean, borderColor?: string, borderWidth?: number) {\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.lineWidth = borderWidth || 0;\r\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n    if (isEmpty === true) {\r\n      ctx.strokeStyle = borderColor;\r\n    } else {\r\n      ctx.strokeStyle = color;\r\n      ctx.fillStyle = color;\r\n      ctx.fill();\r\n    }\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n}","/*\r\n * @Description: cursor model\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-03-02 14:52:33\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 19:24:38\r\n */\r\nimport img1 from '../../../assets/image/peach/1.png';\r\nimport img2 from '../../../assets/image/peach/2.png';\r\nimport img3 from '../../../assets/image/peach/3.png';\r\nimport img4 from '../../../assets/image/peach/4.png';\r\nimport img5 from '../../../assets/image/peach/5.png';\r\nimport img6 from '../../../assets/image/peach/6.png';\r\n\r\nconst cursorModel: any = {\r\n  axisX: '',\r\n  axisY: '',\r\n  isClicked: false,\r\n  isMoving: false,\r\n  animation: {\r\n    mode: 'picture', // 'picture' 'rect'\r\n    offsetXScope: [30, -30],\r\n    offsetYScope: [30, -30],\r\n    widthScope: [20, 3],\r\n    borderWidth: 1,\r\n    speed: 59, // 最大59\r\n    showNumber: 20,\r\n    picArray: [img1, img2, img3, img4, img5, img6]\r\n  }\r\n}\r\n\r\nexport default cursorModel;","export default __webpack_public_path__ + \"images/209ae68b00cc1da8ceecd82d61709fa4.png\";","export default __webpack_public_path__ + \"images/3ab9d8e10ef51af724e060af8a0e40fd.png\";","export default __webpack_public_path__ + \"images/b4cc7f3db6c65422589019f227618267.png\";","export default __webpack_public_path__ + \"images/967fed9f32a9c2cb0a78608245286083.png\";","export default __webpack_public_path__ + \"images/a0c6d77a516bd6740fde3f5d95d9726b.png\";","export default __webpack_public_path__ + \"images/16d05ede6239bcdf8c8ff86f6e6f558b.png\";","/*\r\n * @Description: 公共方法\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-02-11 20:24:25\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-02-29 15:07:28\r\n */\r\nexport default class UtilsFn {\r\n  /**\r\n   * @description: 获得一个随机数字\r\n   * @param {number} max 上限\r\n   * @param {number} min 下限，可选\r\n   * @param {number} multiple 倍数，可选\r\n   * @param {boolean} noZero 去0，可选\r\n   * @param {boolean} noInt 非整数，可选\r\n   * @return: 随机数字\r\n   * @author: Pumpking\r\n   */\r\n  getSimpleRandomNumber(max: number, min?: number, multiple?: number, noZero?: boolean, noInt?: boolean) {\r\n    let number: number;\r\n    if (!min) {\r\n      min = 0;\r\n    }\r\n    function getResult() {\r\n      if (min >= 0) {\r\n        number = noInt ? Math.random() * (max - min + 1) + min : Math.floor(Math.random() * (max - min + 1)) + min;\r\n      } else if (min < 0) {\r\n        let minPer = 0;\r\n        if (max >= 0) {\r\n          minPer = min / (min - max);\r\n          let randomSign = Math.random() > minPer ? 'max' : 'min';\r\n          switch (randomSign) {\r\n            case 'max':\r\n              number = noInt ? (Math.random() * max) : (Math.floor(Math.random() * max));break;\r\n            case 'min':\r\n              number = noInt ? (-Math.random() * (-min)) : (-Math.floor(Math.random() * (-min)));break;\r\n          }\r\n        } else {\r\n          number = noInt ? (-Math.random() * ((-min) - (-max) + 1) + (-max)) : (-Math.floor(Math.random() * ((-min) - (-max) + 1)) + (-max));\r\n        }\r\n      }\r\n      if (multiple && !noInt) {\r\n        if (number / multiple !== 0) {\r\n          if (number % multiple >= multiple / 2) {\r\n            number = Math.ceil(number / multiple) * multiple;\r\n          } else {\r\n            number = Math.floor(number / multiple) * multiple;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    if (noZero) {\r\n      while (!number || number === 0) {\r\n        getResult();\r\n      }\r\n    } else {\r\n      getResult();\r\n    }\r\n    \r\n    return number;\r\n  }\r\n  /**\r\n   * @description: 生成随机颜色\r\n   * @param {null} \r\n   * @return: 随机颜色\r\n   * @author: Pumpking\r\n   */\r\n  getSimpleRandomColor() {\r\n    return '#' + Math.floor(Math.random() * 0xffffff).toString(16);\r\n  }\r\n  /**\r\n   * @description: 从数组中随机一个值\r\n   * @param {array} array 数组\r\n   * @return: 随机值\r\n   * @author: Pumpking\r\n   */\r\n  getRandomItemFromArray(array: Array<any>) {\r\n    return array[Math.floor(Math.random() * array.length)];\r\n  }\r\n  /**\r\n   * @description: 深拷贝\r\n   * @param {any} 原数据 \r\n   * @return: 深拷贝后的数据\r\n   * @author: Pumpking\r\n   */\r\n  deepClone(origin: any) {\r\n    let toStr = Object.prototype.toString\r\n    let isInvalid = toStr.call(origin) !== '[object Object]' && toStr.call(origin) !== '[object Array]'\r\n    if (isInvalid) {\r\n      return origin\r\n    }\r\n    let target: any = toStr.call(origin) === '[object Object]' ? {} : []\r\n    for (const key in origin) {\r\n      if (origin.hasOwnProperty(key)) {\r\n        const item = origin[key];\r\n        if (typeof item === 'object' && item !== null) {\r\n          target[key] = this.deepClone(item)\r\n        } else {\r\n          target[key] = item\r\n        }\r\n      }\r\n    }\r\n    return target\r\n  }\r\n}","/*\r\n * @Description: 指针\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-02-29 15:13:28\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 15:29:50\r\n */\r\nimport $ from \"jquery\";\r\nimport UtilsFn from \"../../utils/utils\";\r\nimport CanvasFn from \"../../utils/canvasFn\";\r\nimport mainModel from \"../../model/model\";\r\nimport cursorModel from \"../../model/item/cursor\";\r\n\r\n\r\nexport default class Cursor {\r\n  utilsFn: any;\r\n  canvasFn: any;\r\n\r\n  constructor() {\r\n    this.utilsFn = new UtilsFn();\r\n    this.canvasFn = new CanvasFn();\r\n  }\r\n\r\n  init() {\r\n    cursorModel.animation.count = cursorModel.animation.count || 0;\r\n    cursorModel.animation.randomInfoArray = cursorModel.animation.randomInfoArray || [];\r\n    cursorModel.animation.imageArray = cursorModel.animation.imageArray || [];\r\n  }\r\n  render() {\r\n    if (cursorModel.animation.mode === 'picture' && cursorModel.animation.imageArray.length === 0) {\r\n      $.each(cursorModel.animation.picArray, (i, item) => {\r\n        let image = new Image();\r\n        image.src = item;\r\n        cursorModel.animation.imageArray.push(image);\r\n      });\r\n    }\r\n\r\n    cursorModel.animation.count++;\r\n    if (cursorModel.animation.count === (60 - cursorModel.animation.speed)) {\r\n      if (cursorModel.animation.randomInfoArray.length === cursorModel.animation.showNumber) {\r\n        cursorModel.animation.currentIndex = cursorModel.animation.currentIndex || 0;\r\n        cursorModel.animation.randomInfoArray[cursorModel.animation.currentIndex] = this.generateInfo(cursorModel);\r\n        if (cursorModel.animation.currentIndex === cursorModel.animation.randomInfoArray.length - 1) {\r\n          cursorModel.animation.currentIndex = 0;\r\n        } else {\r\n          cursorModel.animation.currentIndex++;\r\n        }\r\n      } else {\r\n        cursorModel.animation.randomInfoArray.push(this.generateInfo(cursorModel));\r\n      }\r\n      cursorModel.animation.count = 0;\r\n    }\r\n    \r\n    $.each(cursorModel.animation.randomInfoArray, (i, item) => {\r\n      if (cursorModel.animation.mode === 'rect') {\r\n        this.drawRectByRandomInfo(item);\r\n      } else if (cursorModel.animation.mode === 'picture') {\r\n        this.drawPicByRandomInfo(item);\r\n      }\r\n    });\r\n  }\r\n  resetRenderInfo() {\r\n    cursorModel.animation.randomInfoArray = [];\r\n    cursorModel.animation.count = 0;\r\n    cursorModel.animation.currentIndex = 0;\r\n  }\r\n  generateInfo(cursor: any) {\r\n    const randomRectInfo: any = {\r\n      x: cursor.axisX,\r\n      y: cursor.axisY,\r\n      randomOffsetX: this.utilsFn.getSimpleRandomNumber(cursorModel.animation.offsetXScope[0], cursorModel.animation.offsetXScope[1]),\r\n      randomOffsetY: this.utilsFn.getSimpleRandomNumber(cursorModel.animation.offsetYScope[0], cursorModel.animation.offsetYScope[1]),\r\n      randomWidth: this.utilsFn.getSimpleRandomNumber(cursorModel.animation.widthScope[0], cursorModel.animation.widthScope[1]),\r\n      randomHeight: null,\r\n      randomColor: this.utilsFn.getSimpleRandomColor(),\r\n      randomImage: this.utilsFn.getRandomItemFromArray(cursorModel.animation.imageArray)\r\n    }\r\n    randomRectInfo.randomHeight = randomRectInfo.randomWidth;\r\n    return randomRectInfo;\r\n  }\r\n  drawRectByRandomInfo(obj: any) {\r\n    this.canvasFn.drawRect(mainModel.ctx, obj.x + obj.randomOffsetX - obj.randomWidth / 2, obj.y + obj.randomOffsetY - obj.randomHeight / 2, obj.randomWidth, obj.randomHeight, null, true, obj.randomColor, cursorModel.animation.borderWidth);\r\n  }\r\n  drawPicByRandomInfo(obj: any) {\r\n    this.canvasFn.drawImage(mainModel.ctx, obj.randomImage, obj.x + obj.randomOffsetX - obj.randomWidth / 2, obj.y + obj.randomOffsetY - obj.randomHeight / 2, obj.randomWidth, obj.randomHeight);\r\n  }\r\n}","/*\r\n * @Description: game model\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-03-02 16:04:13\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 16:51:10\r\n */\r\nlet gameModel: any = {\r\n  mode: 'snake',\r\n  snake: {\r\n    game: {\r\n      rectWidth: 10,\r\n      start: false\r\n    },\r\n    wall: {\r\n      x: 4,\r\n      y: 4,\r\n      w: 80,\r\n      h: 50,\r\n      color: '#000'\r\n    },\r\n    player: {\r\n      oriAxis: {\r\n        x: 10,\r\n        y: 10\r\n      },\r\n      oriLength: 5,\r\n      oriSpeed: 50, // 最大59\r\n      color: '#ff0000',\r\n      speedUpIntervalCount: 5,\r\n      scoreAxis: {\r\n        x: 900,\r\n        y: 40\r\n      },\r\n      scoreColor: '#fff',\r\n      scoreText: '分数',\r\n      scoreFont: 20\r\n    },\r\n    food: {\r\n      count: 10\r\n    }\r\n  }\r\n};\r\n\r\ngameModel.snake.wall.x = gameModel.snake.wall.x * gameModel.snake.game.rectWidth;\r\ngameModel.snake.wall.y = gameModel.snake.wall.y * gameModel.snake.game.rectWidth;\r\ngameModel.snake.wall.w = gameModel.snake.wall.w * gameModel.snake.game.rectWidth;\r\ngameModel.snake.wall.h = gameModel.snake.wall.h * gameModel.snake.game.rectWidth;\r\ngameModel.snake.player.oriAxis.x = gameModel.snake.player.oriAxis.x * gameModel.snake.game.rectWidth;\r\ngameModel.snake.player.oriAxis.y = gameModel.snake.player.oriAxis.y * gameModel.snake.game.rectWidth;\r\n\r\nexport default gameModel;","/*\r\n * @Description: snake\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-02-29 15:18:26\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 19:11:36\r\n */\r\nimport $ from \"jquery\";\r\nimport UtilsFn from \"../../../utils/utils\";\r\nimport CanvasFn from \"../../../utils/canvasFn\";\r\nimport mainModel from \"../../../model/model\";\r\nimport gameModel from \"../../../model/item/game\";\r\n\r\n\r\nexport default class Snake {\r\n  utilsFn: any;\r\n  canvasFn: any;\r\n\r\n  rectWidth: number;\r\n\r\n  constructor() {\r\n    this.utilsFn = new UtilsFn();\r\n    this.canvasFn = new CanvasFn();\r\n\r\n    this.rectWidth = gameModel.snake.game.rectWidth;\r\n  }\r\n\r\n  init() {\r\n    this.initPlayerInfo();\r\n    this.initWallInfo();\r\n    this.initFoodInfo();\r\n    this.initScoreInfo();\r\n  }\r\n  render() {\r\n    this.drawPlayer();\r\n    this.drawWall();\r\n    this.drawFood();\r\n    this.drawScore();\r\n  }\r\n  initPlayerInfo() {\r\n    const playerModel = gameModel.snake.player;\r\n\r\n    playerModel.score = playerModel.score || 0;\r\n    playerModel.speedCount = playerModel.speedCount || 0;\r\n    playerModel.speed = playerModel.speed || (60 - playerModel.oriSpeed);\r\n    playerModel.count = playerModel.count || 0;\r\n    playerModel.position = playerModel.position || ['right', 'right'];\r\n    gameModel.snake.food.axis = gameModel.snake.food.axis || [];\r\n\r\n    if (gameModel.snake.game.start === false) {\r\n      playerModel.axis = [];\r\n      for (let i = 0; i < playerModel.oriLength; i++) {\r\n        playerModel.axis.push({\r\n          x: playerModel.oriAxis.x + i * this.rectWidth,\r\n          y: playerModel.oriAxis.y\r\n        });\r\n      }\r\n    }\r\n  }\r\n  drawPlayer() {\r\n    this.drawPlayerByInfo();\r\n\r\n    if (gameModel.snake.game.start === true) {\r\n      this.playerMoveByPosition();\r\n\r\n      this.eatFood();\r\n      this.checkSpeedUp();\r\n      this.checkCollision();\r\n    }\r\n  }\r\n  initWallInfo() {\r\n    const wallModel = gameModel.snake.wall;\r\n    \r\n    const x = wallModel.x + this.rectWidth / 2;\r\n    const y = wallModel.y + this.rectWidth / 2;\r\n    let vm: any = this;\r\n    wallModel.axis = [{\r\n        x: x,\r\n        y: y\r\n      },\r\n      {\r\n        x: x + wallModel.w,\r\n        y: y\r\n      },\r\n      {\r\n        x: x + wallModel.w,\r\n        y: y + wallModel.h\r\n      },\r\n      {\r\n        x: x,\r\n        y: y + wallModel.h\r\n      },\r\n    ];\r\n    wallModel.render = () => {\r\n      vm.canvasFn.drawLine(wallModel.offscreenCtx, wallModel.axis, wallModel.color, this.rectWidth);\r\n    };\r\n    this.canvasFn.createAndRenderOffscreenCanvas(wallModel, mainModel.clientWidth, mainModel.clientHeight);\r\n  }\r\n  drawWall() {\r\n    const wallModel = gameModel.snake.wall;\r\n\r\n    this.canvasFn.drawImage(mainModel.ctx, wallModel.offscreenCanvas, 0, 0, mainModel.clientWidth, mainModel.clientHeight);\r\n  }\r\n  initFoodInfo() {\r\n    const foodModel = gameModel.snake.food;\r\n    const wallModel = gameModel.snake.wall;\r\n\r\n    if (foodModel.axis.length < foodModel.count) {\r\n      for (let i = 0; i < foodModel.count; i++) {\r\n        foodModel.axis.push({\r\n          x: this.utilsFn.getSimpleRandomNumber(wallModel.x + wallModel.w - this.rectWidth, wallModel.x + this.rectWidth, this.rectWidth),\r\n          y: this.utilsFn.getSimpleRandomNumber(wallModel.y + wallModel.h - this.rectWidth, wallModel.y + this.rectWidth, this.rectWidth),\r\n          color: this.utilsFn.getSimpleRandomColor()\r\n        });\r\n      }\r\n    }\r\n  }\r\n  drawFood() {\r\n    const foodModel = gameModel.snake.food;\r\n    $.each(foodModel.axis, (i, item) => {\r\n      this.canvasFn.drawRect(mainModel.ctx, item.x, item.y, this.rectWidth, this.rectWidth, item.color);\r\n    });\r\n  }\r\n  initScoreInfo() {\r\n\r\n  }\r\n  drawScore() {\r\n    const playerModel = gameModel.snake.player;\r\n    this.canvasFn.drawText(mainModel.ctx, `${playerModel.scoreText}: ${playerModel.score}`, playerModel.scoreAxis.x, playerModel.scoreAxis.y, playerModel.scoreFont, playerModel.scoreColor);\r\n  }\r\n  resetInfo() {\r\n    const model = gameModel.snake;\r\n\r\n    model.game.start = false;\r\n\r\n    model.player.position = ['right', 'right'];\r\n    model.player.count = 0;\r\n    model.player.length = model.player.oriLength;\r\n    model.player.speed = (60 - model.player.oriSpeed);\r\n    model.player.score = 0;\r\n    model.player.speedCount = 0;\r\n\r\n    model.food.axis = [];\r\n\r\n    this.init();\r\n  }\r\n  drawPlayerByInfo() {\r\n    const playerModel = gameModel.snake.player;\r\n    $.each(playerModel.axis, (i, item) => {\r\n      this.canvasFn.drawRect(mainModel.ctx, item.x, item.y, this.rectWidth, this.rectWidth, playerModel.color);\r\n    });\r\n  }\r\n  playerMoveByPosition() {\r\n    const playerModel = gameModel.snake.player;\r\n\r\n    playerModel.count++;\r\n    if (playerModel.count === playerModel.speed) {\r\n\r\n      if (playerModel.eating === true) {\r\n        playerModel.eating = false;\r\n      } else {\r\n        playerModel.axis.shift(0);\r\n      }\r\n\r\n      const tempObj = this.utilsFn.deepClone(playerModel.axis[playerModel.axis.length - 1]);\r\n      if (playerModel.position[1] === 'right') {\r\n        tempObj.x = tempObj.x + this.rectWidth;\r\n      } else if (playerModel.position[1] === 'left') {\r\n        tempObj.x = tempObj.x - this.rectWidth;\r\n      } else if (playerModel.position[1] === 'top') {\r\n        tempObj.y = tempObj.y - this.rectWidth;\r\n      } else if (playerModel.position[1] === 'bottom') {\r\n        tempObj.y = tempObj.y + this.rectWidth;\r\n      }\r\n      playerModel.axis.push(tempObj);\r\n      playerModel.count = 0;\r\n      playerModel.position[0] = playerModel.position[1];\r\n    }\r\n  }\r\n  checkCollision() {\r\n    const wallModel = gameModel.snake.wall;\r\n    const playerModel = gameModel.snake.player;\r\n    const lastAxis = playerModel.axis[playerModel.axis.length - 1];\r\n    $.each(playerModel.axis, (i, item) => {\r\n      if (lastAxis.x === item.x && lastAxis.y === item.y && i !== playerModel.axis.length - 1) {\r\n        this.resetInfo();\r\n      }\r\n    });\r\n    if (lastAxis.x < wallModel.x + this.rectWidth || lastAxis.x > wallModel.x + wallModel.w - this.rectWidth || lastAxis.y < wallModel.y + this.rectWidth || lastAxis.y > wallModel.y + wallModel.h - this.rectWidth) {\r\n      this.resetInfo();\r\n    }\r\n  }\r\n  eatFood() {\r\n    const foodModel = gameModel.snake.food;\r\n    const playerModel = gameModel.snake.player;\r\n    const wallModel = gameModel.snake.wall;\r\n\r\n    const headAxis = playerModel.axis[playerModel.axis.length - 1];\r\n\r\n    for (let i = 0; i < foodModel.count; i++) {\r\n      if (foodModel.axis[i].x == headAxis.x && foodModel.axis[i].y == headAxis.y) {\r\n        foodModel.axis[i].x = this.utilsFn.getSimpleRandomNumber(wallModel.x + wallModel.w, wallModel.x, this.rectWidth);\r\n        foodModel.axis[i].y = this.utilsFn.getSimpleRandomNumber(wallModel.y + wallModel.h, wallModel.y, this.rectWidth);\r\n        foodModel.axis[i].color = this.utilsFn.getSimpleRandomColor();\r\n\r\n        playerModel.eating = true;\r\n        playerModel.score++;\r\n        playerModel.speedCount++;\r\n      }\r\n    }\r\n  }\r\n  checkSpeedUp() {\r\n    const playerModel = gameModel.snake.player;\r\n    if (playerModel.speedCount !== 0 && playerModel.speedCount % playerModel.speedUpIntervalCount === 0 && playerModel.speed > 1) {\r\n      playerModel.speedCount = 0;\r\n      playerModel.speed--;\r\n    }\r\n  }\r\n}","/*\r\n * @Description: game controller\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-03-02 18:57:18\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 19:06:08\r\n */\r\nimport Snake from \"./game/snake\";\r\nimport gameModel from \"../../model/item/game\";\r\n\r\nexport default class Game {\r\n  snake: any;\r\n  \r\n  constructor() {\r\n    this.snake = new Snake()\r\n  }\r\n\r\n  init() {\r\n    switch (gameModel.mode) {\r\n      case 'snake': this.snake.init();break;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    switch (gameModel.mode) {\r\n      case 'snake': this.snake.render();break;\r\n    }\r\n  }\r\n}","/*\r\n * @Description: menu model\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-03-02 15:58:38\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 15:58:40\r\n */\r\nlet menuModel: any = {\r\n  mode: 'star',\r\n  star: {\r\n    tiny: {\r\n      maxNumber: 500,\r\n      color: '#fff',\r\n      radius: 2,\r\n      speed: 2\r\n    },\r\n    big: {\r\n\r\n    },\r\n    text: {\r\n      content: [{\r\n        name: '第一行',\r\n        x: 200,\r\n        y: 150,\r\n        w: 300,\r\n        h: 100,\r\n        color: 'gray',\r\n        font: 100\r\n      }, {\r\n        name: '第二行',\r\n        x: 200,\r\n        y: 400,\r\n        w: 300,\r\n        h: 100,\r\n        color: 'gray',\r\n        font: 100\r\n      }],\r\n      focusIndex: null,\r\n      font: 100,\r\n      defR: 5,\r\n      gap: 5,\r\n      textCount: 0\r\n    }\r\n  }\r\n};\r\n\r\nexport default menuModel;","/*\r\n * @Description: \r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-02-29 15:24:02\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 19:19:26\r\n */\r\nimport $ from \"jquery\";\r\nimport UtilsFn from \"../../../utils/utils\";\r\nimport CanvasFn from \"../../../utils/canvasFn\";\r\nimport mainModel from \"../../../model/model\";\r\nimport menuModel from \"../../../model/item/menu\";\r\n\r\n\r\nexport default class Star {\r\n  utilsFn: any;\r\n  canvasFn: any;\r\n\r\n  constructor() {\r\n    this.utilsFn = new UtilsFn();\r\n    this.canvasFn = new CanvasFn();\r\n  }\r\n\r\n  init() {\r\n    this.initTinyStarInfo();\r\n    this.initMenuTextInfo();\r\n    this.initTextInfo();\r\n  }\r\n  render() {\r\n    this.drawTinyStar();\r\n\r\n    this.drawMenuText();\r\n\r\n    if (menuModel.star.text.focusIndex !== null) {\r\n      this.drawText(menuModel.star.text.focusIndex);\r\n    }\r\n  }\r\n  initTinyStarInfo() {\r\n    const tinyStarModel = menuModel.star.tiny;\r\n\r\n    tinyStarModel.axis = tinyStarModel.axis || [];\r\n\r\n    let vm: any = this;\r\n    if (tinyStarModel.axis.length === 0) {\r\n      for (let i = 0; i < tinyStarModel.maxNumber; i++) {\r\n        let obj = {\r\n          x: vm.utilsFn.getSimpleRandomNumber(mainModel.clientWidth),\r\n          y: vm.utilsFn.getSimpleRandomNumber(mainModel.clientHeight),\r\n          velocityX: vm.utilsFn.getSimpleRandomNumber(tinyStarModel.speed, -tinyStarModel.speed, null, true, true),\r\n          velocityY: vm.utilsFn.getSimpleRandomNumber(tinyStarModel.speed, -tinyStarModel.speed, null, true, true),\r\n          color: vm.utilsFn.getSimpleRandomColor(),\r\n          render() {\r\n            if (tinyStarModel.radius <= 10) {\r\n              vm.canvasFn.drawRect(this.offscreenCtx, 0, 0, tinyStarModel.radius, tinyStarModel.radius, this.color);\r\n            } else {\r\n              vm.canvasFn.drawCircle(this.offscreenCtx, tinyStarModel.radius, tinyStarModel.radius, tinyStarModel.radius, this.color, false);\r\n            }\r\n          },\r\n          move() {\r\n            this.x += this.velocityX;\r\n            this.y += this.velocityY;\r\n            if (this.x >= mainModel.clientWidth || this.x <= 0) {\r\n              this.velocityX = -this.velocityX;\r\n            }\r\n            if (this.y >= mainModel.clientHeight || this.y <= 0) {\r\n              this.velocityY = -this.velocityY;\r\n            }\r\n          }\r\n        };\r\n        tinyStarModel.axis.push(obj);\r\n      }\r\n    }\r\n    $.each(tinyStarModel.axis, (i, item) => {\r\n      this.canvasFn.createAndRenderOffscreenCanvas(item, tinyStarModel.radius * 2, tinyStarModel.radius * 2);\r\n    });\r\n  }\r\n  drawTinyStar() {\r\n    const tinyStarModel = menuModel.star.tiny;\r\n    $.each(tinyStarModel.axis, (i, item) => {\r\n      this.canvasFn.drawImage(mainModel.ctx, item.offscreenCanvas, item.x, item.y, tinyStarModel.radius * 2, tinyStarModel.radius * 2);\r\n      item.move();\r\n    });\r\n  }\r\n  initMenuTextInfo() {\r\n    const textModel = menuModel.star.text;\r\n\r\n    $.each(textModel.content, (i, item) => {\r\n      item.render = () => {\r\n        this.canvasFn.drawText(item.offscreenCtx, item.name, 0, 0, item.font, item.color);\r\n      };\r\n      this.canvasFn.createAndRenderOffscreenCanvas(item, item.w, item.h);\r\n    });\r\n  }\r\n  drawMenuText() {\r\n    const textModel = menuModel.star.text;\r\n\r\n    $.each(textModel.content, (i, item) => {\r\n      if (textModel.focusIndex !== i) {\r\n        this.canvasFn.drawImage(mainModel.ctx, item.offscreenCanvas, item.x, item.y, item.w, item.h);\r\n      }\r\n    });\r\n  }\r\n  initTextInfo() {\r\n    const textModel = menuModel.star.text;\r\n\r\n    let vm = this;\r\n    $.each(textModel.content, (i, item) => {\r\n      item.innerTextObject = {\r\n        name: item.name,\r\n        x: item.x,\r\n        y: item.y,\r\n        w: item.w,\r\n        h: item.h,\r\n        font: item.font,\r\n        render() {\r\n          vm.createText(this.offscreenCtx, item);\r\n          vm.findText(this.offscreenCtx, item);\r\n        }\r\n      };\r\n      this.canvasFn.createAndRenderOffscreenCanvas(item.innerTextObject, item.innerTextObject.w, item.innerTextObject.h);\r\n    });\r\n  }\r\n  drawText(index: number) {\r\n    const textModel = menuModel.star.text;\r\n\r\n    $.each(textModel.content, (i, item) => {\r\n      const obj = item.innerTextObject;\r\n\r\n      if (i === index) {\r\n        this.canvasFn.drawImage(mainModel.ctx, obj.offscreenCanvas, obj.x, obj.y, obj.w, obj.h);\r\n      }\r\n    });\r\n  }\r\n  //生成文字\r\n  createText(ctx: any, obj: any) {\r\n    this.canvasFn.drawText(ctx, obj.name, 0, 0, obj.font, 'red');\r\n  }\r\n  //查找不同颜色的值和位置\r\n  findText(ctx: any, obj: any) {\r\n    let imageData = ctx.getImageData(0, 0, obj.w, obj.h);\r\n    let data = imageData.data;\r\n    let pos = [];\r\n    for (let i = 0; i < obj.w; i += menuModel.star.text.gap) {\r\n      for (let j = 0; j < obj.h; j += menuModel.star.text.gap) {\r\n        let index = (j * obj.w + i) * 4;\r\n        if (data[index] > 128) {\r\n          pos.push({\r\n            x: i,\r\n            y: j\r\n          });\r\n        }\r\n      }\r\n    }\r\n    this.createRadius(ctx, pos, obj);\r\n  }\r\n  createRadius(ctx: any, data: Array<any>, obj: any) {\r\n    ctx.clearRect(0, 0, obj.w, obj.h);\r\n    for (let i = 0; i < data.length; i++) {\r\n      ctx.beginPath();\r\n\r\n      ctx.arc(data[i].x, data[i].y, Math.random() * menuModel.star.text.defR, 0, Math.PI * 2);\r\n      ctx.fillStyle = \"rgb(\" + Math.random() * 255 + \",\" + Math.random() * 255 + \",\" + Math.random() * 255 + \")\";\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    }\r\n  }\r\n}","/*\r\n * @Description: menu controller\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-03-02 18:57:25\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 19:20:59\r\n */\r\nimport Star from \"./menu/star\";\r\nimport menuModel from \"../../model/item/menu\";\r\n\r\nexport default class Menu {\r\n  star: any;\r\n  \r\n  constructor() {\r\n    this.star = new Star()\r\n  }\r\n\r\n  init() {\r\n    switch (menuModel.mode) {\r\n      case 'star': this.star.init();break;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    switch (menuModel.mode) {\r\n      case 'star': this.star.render();break;\r\n    }\r\n  }\r\n}","/*\r\n * @Description: 总控制器\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-02-11 16:56:12\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 19:09:35\r\n * TODO: \r\n * 6.菜单\r\n * 6.1.鼠标指向，星辰移动聚焦\r\n * 6.3.点击跳转\r\n * 8.皮肤\r\n * 8.5.代码优化\r\n * 9.多人（暂不考虑）\r\n * 10.自食截断（暂不考虑）\r\n */\r\nimport Stats from \"stats.js\";\r\n\r\nimport CanvasFn from \"../utils/canvasFn\";\r\nimport mainModel from \"../model/model\";\r\nimport cursorModel from \"../model/item/cursor\";\r\n\r\nimport Cursor from \"./item/cursor\";\r\nimport Game from \"./item/game\";\r\nimport Menu from \"./item/menu\";\r\n\r\n\r\nexport default class MainController {\r\n  stats: any;\r\n\r\n  canvasFn: any;\r\n\r\n  cursor: any;\r\n  game: any;\r\n  menu: any;\r\n\r\n  constructor() {\r\n    this.canvasFn = new CanvasFn();\r\n\r\n    this.cursor = new Cursor();\r\n    this.game = new Game();\r\n    this.menu = new Menu();\r\n  }\r\n\r\n  init() {\r\n\r\n    this.initStats(); // 初始化stats.js\r\n\r\n    this.canvasFn.setCanvasToFullScreen(mainModel.canvasNode); // 设置主canvas为全屏\r\n\r\n    this.initRenderInfo(); // 初始化所有渲染相关信息\r\n\r\n    this.canvasControllerMainFn(); // 开始主函数\r\n  }\r\n  \r\n  canvasControllerMainFn = () => {\r\n\r\n    this.stats.begin(); // stats.js开始\r\n\r\n    this.clearAll(); // 界面清除--放最前\r\n\r\n    this.render(); // 渲染\r\n\r\n    this.stats.end(); // stats.js结束\r\n\r\n    window.requestAnimationFrame(this.canvasControllerMainFn); // RAF执行\r\n  }\r\n  initStats() {\r\n    this.stats = new Stats();\r\n    this.stats.showPanel(0);\r\n    document.body.appendChild(this.stats.dom);\r\n  }\r\n  initRenderInfo() {\r\n    if (mainModel.interface === 'game') {\r\n      this.game.init();\r\n    } else if (mainModel.interface === 'menu') {\r\n      this.menu.init();\r\n    }\r\n\r\n    this.cursor.init();\r\n  }\r\n  render() {\r\n    if (mainModel.interface === 'game') {\r\n      this.game.render();\r\n    } else if (mainModel.interface === 'menu') {\r\n      this.menu.render();\r\n    }\r\n    \r\n    if (cursorModel.axisX && cursorModel.axisY && cursorModel.isClicked) {\r\n      this.cursor.render();\r\n    } else {\r\n      this.cursor.resetRenderInfo();\r\n    }\r\n  }\r\n  clearAll() {\r\n    this.canvasFn.clearRect(mainModel.ctx, 0, 0, mainModel.clientWidth, mainModel.clientHeight);\r\n  }\r\n}","/*\r\n * @Description: 测试\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-02-20 17:26:57\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-02-29 13:38:26\r\n */\r\nimport UtilsFn from \"./utils/utils\";\r\nimport $ from \"jquery\";\r\n\r\nconst utilsFn = new UtilsFn();\r\n\r\nlet testModel: any = {\r\n  randomNumberArray: []\r\n};\r\n\r\nexport default class TestFn {\r\n\r\n  init() {\r\n    this.utils.getSimpleRandomNumber();\r\n  }\r\n\r\n  utils = {\r\n    getSimpleRandomNumber(): void {\r\n      test('随机数', () => {\r\n        const number = utilsFn.getSimpleRandomNumber(100, -100, 10, false, false);\r\n        let count = 0;\r\n        $.each(testModel.randomNumberArray, (i, item) => {\r\n          if (item.number === number) {\r\n            item.count++;\r\n            count++;\r\n          }\r\n        });\r\n        if (count === 0) {\r\n          testModel.randomNumberArray.push({\r\n            number: number,\r\n            count: 1\r\n          });\r\n        }\r\n        \r\n        return number;\r\n      });\r\n      testModel.randomNumberArray.sort((a: any, b: any) => {\r\n        return a.number - b.number;\r\n      });\r\n      console.table(testModel.randomNumberArray);\r\n    }\r\n  }\r\n};\r\n\r\nfunction test(name: string, fn: any) {\r\n  console.time(name);\r\n  for (let i = 0; i < 1000000; i++) {\r\n    typeof fn === 'function' && fn();\r\n  }\r\n  console.timeEnd(name);\r\n}","/*\r\n * @Description: mouse service\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-03-02 15:08:03\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 16:55:44\r\n */\r\nimport $ from \"jquery\";\r\nimport mainModel from \"../../model/model\";\r\nimport cursorModel from \"../../model/item/cursor\";\r\nimport menuModel from \"../../model/item/menu\";\r\n\r\nexport default class MouseService {\r\n  init() {\r\n    this.mouseMove();\r\n    this.mouseUp();\r\n    this.mouseDown();\r\n    this.mouseLeave();\r\n  }\r\n  mouseMove() {\r\n    $(\"#mainCanvas\").off('mousemove').on('mousemove', (e) => {\r\n      cursorModel.isMoving = true;\r\n      cursorModel.axisX = e.offsetX;\r\n      cursorModel.axisY = e.offsetY;\r\n\r\n      const menuText = menuModel[menuModel.mode].text;\r\n\r\n      withinRect(menuText.content).then((index) => {\r\n        menuText.focusIndex = index;\r\n        mainModel.canvasNode.style.cursor = 'pointer';\r\n      }, () => {\r\n        menuText.focusIndex = null;\r\n        mainModel.canvasNode.style.cursor = 'default';\r\n      });\r\n\r\n      function withinRect(textArray: Array<any>) {\r\n        return new Promise((resolve, reject) => {\r\n          let index = null;\r\n          $.each(textArray, (i, item) => {\r\n            if (cursorModel.axisX <= item.x + item.w && cursorModel.axisX >= item.x && cursorModel.axisY <= item.y + item.h && cursorModel.axisY >= item.y) {\r\n              index = i;\r\n            }\r\n          });\r\n          if (index !== null) {\r\n            resolve(index);\r\n          } else {\r\n            reject();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n  mouseDown() {\r\n    $(\"#mainCanvas\").off('mousedown').on('mousedown', (e) => {\r\n      cursorModel.isClicked = true;\r\n    });\r\n  }\r\n  mouseUp() {\r\n    $(\"#mainCanvas\").off('mouseup').on('mouseup', (e) => {\r\n      cursorModel.isClicked = false;\r\n    });\r\n  }\r\n  mouseLeave() {\r\n    $(\"#mainCanvas\").off('mouseleave').on('mouseleave', (e) => {\r\n      cursorModel.isClicked = false;\r\n    });\r\n  }\r\n}","/*\r\n * @Description: keyboard service\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-03-02 15:47:32\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 17:58:45\r\n */\r\nimport $ from \"jquery\";\r\nimport gameModel from \"../../model/item/game\";\r\n\r\nexport default class KeyboardService {\r\n  init() {\r\n    this.keyDown();\r\n  }\r\n  keyDown() {\r\n    $(window).off('keydown').on('keydown', (e) => {\r\n      if (gameModel.mode === 'snake') {\r\n        e.preventDefault();\r\n        const playerModel = gameModel[gameModel.mode].player;\r\n        gameModel[gameModel.mode].game.start = true;\r\n        \r\n        switch (e.keyCode) {\r\n          case 37:\r\n            playerModel.position[0] !== 'right' && this.refreshPosition(\"left\");\r\n            break;\r\n          case 38:\r\n            playerModel.position[0] !== 'bottom' && this.refreshPosition(\"top\");\r\n            break;\r\n          case 39:\r\n            playerModel.position[0] !== 'left' && this.refreshPosition(\"right\");\r\n            break;\r\n          case 40:\r\n            playerModel.position[0] !== 'top' && this.refreshPosition(\"bottom\");\r\n            break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  refreshPosition(pos: string) {\r\n    const playerModel = gameModel[gameModel.mode].player;\r\n    \r\n    playerModel.position.shift(0);\r\n    playerModel.position.push(pos);\r\n  }\r\n}","/*\r\n * @Description: screen service\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-03-02 15:47:44\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 15:47:45\r\n */\r\nimport $ from \"jquery\";\r\nimport mainModel from \"../../model/model\";\r\n\r\nexport default class ScreenService {\r\n  init() {\r\n    this.resize();\r\n  }\r\n  resize() {\r\n    $(window).resize(() => {\r\n      mainModel.clientWidth = document.documentElement.clientWidth;\r\n      mainModel.clientHeight = document.documentElement.clientHeight;\r\n    });\r\n  }\r\n}","/*\r\n * @Description: main service\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-02-11 17:04:42\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 15:50:54\r\n */\r\nimport MouseService from \"./item/mouse\";\r\nimport KeyboardService from \"./item/keyboard\";\r\nimport ScreenService from \"./item/screen\";\r\n\r\nexport default class MainService {\r\n  mouseService: any;\r\n  keyboardService: any;\r\n  screenService: any;\r\n\r\n  constructor() {\r\n    this.mouseService = new MouseService();\r\n    this.keyboardService = new KeyboardService();\r\n    this.screenService = new ScreenService();\r\n  }\r\n  \r\n  init() {\r\n    this.mouseService.init();\r\n    this.keyboardService.init();\r\n    this.screenService.init();\r\n  }\r\n}","/*\r\n * @Description: 主函数\r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-02-11 16:13:25\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 18:02:55\r\n */\r\nimport MainController from \"./controller/controller\";\r\nimport TestFn from \"./test\";\r\nimport MainService from \"./service/service\";\r\nimport mainModel from \"./model/model\";\r\n\r\nexport default class MainFn {\r\n  mainController: any;\r\n  mainService: any;\r\n  testFn: any;\r\n\r\n  constructor() {\r\n    this.mainController = new MainController();\r\n    this.mainService = new MainService();\r\n    this.testFn = new TestFn();\r\n  }\r\n  init() {\r\n    if (mainModel.mode === 'normal') {\r\n      this.mainController.init();\r\n      this.mainService.init();\r\n    } else if (mainModel.mode === 'test') {\r\n      this.testFn.init();\r\n    }\r\n  }\r\n};","/*\r\n * @Description: \r\n * @Version: 1.0\r\n * @Autor: Pumpking\r\n * @Date: 2020-02-11 16:13:25\r\n * @LastEditors: Pumpking\r\n * @LastEditTime: 2020-03-02 17:53:57\r\n */\r\n\"use strict\";\r\n\r\nimport \"./vendor/flexble/base.css\";\r\nimport \"./vendor/flexble/flexible\";\r\n\r\nimport \"./style.css\";\r\n\r\nimport $ from \"jquery\";\r\nimport MainFn from \"./js/main\";\r\n\r\n$(document).ready(() => {\r\n  // compatibility();\r\n  init();\r\n  hotModuleSet();\r\n});\r\n\r\nfunction init() {\r\n  const mainFn = new MainFn();\r\n  mainFn.init();\r\n}\r\n// ts 兼容性写法不可行\r\n// function compatibility() {\r\n//   if (!window.requestAnimationFrame) {\r\n//     window.requestAnimationFrame = (\r\n//       window.webkitRequestAnimationFrame ||\r\n//       window.mozRequestAnimationFrame ||\r\n//       window.msRquestAniamtionFrame ||\r\n//       window.oRequestAnimationFrame ||\r\n//       function (callback: any) {\r\n//         return setTimeout(callback, Math.floor(1000 / 60))\r\n//       }\r\n//     )\r\n//   }\r\n// }\r\n\r\nfunction hotModuleSet() {\r\n  if (module.hot) {\r\n    module.hot.accept(\"./js/main.ts\", () => {\r\n      console.log(\"热部署模块更新\");\r\n      init();\r\n    });\r\n  }\r\n\r\n\r\n  if (process.env.NODE_ENV !== \"production\") {\r\n    console.log(\"Looks like we are in development mode!\");\r\n  }\r\n}"],"sourceRoot":""}